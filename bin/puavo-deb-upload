#!/bin/sh

help(){
    echo "
    Usage: $(basename $0) <debbox url> <.deb packages>

    Publish debian packages to given debbox url.

    https://github.com/opinsys/debbox
    "

}

[ "$1" = "--help" -o "$1" = "-h" ] && help && exit 0
[ "$1" = "" -o "$2" = "" ] && help && exit 1

debbox_url="$1"
shift
packages="$@"

set -eu

for deb in $packages; do
    echo "Uploading $deb to $debbox_url"
    curl --fail --form "deb=@${deb}" "${debbox_url}/deb"
    echo
done
